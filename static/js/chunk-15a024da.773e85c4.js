(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-15a024da"],{"53aa":function(t,e,n){"use strict";var a=n("9c90"),s=n.n(a);s.a},5515:function(t,e,n){"use strict";var a,s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bgfff"},[n("div",[t._m(0),n("div",{staticClass:"search_warp"},[n("i",{staticClass:"icon_search"}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],staticClass:"search_input",attrs:{type:"text",placeholder:"请输入银行名称关键词"},domProps:{value:t.searchValue},on:{input:function(e){e.target.composing||(t.searchValue=e.target.value)}}})])]),n("div",{staticClass:"search_content"},[n("mt-index-list",{attrs:{height:312}},[t.searchValue?t._e():n("mt-index-section",{attrs:{index:""}},[n("li",[n("p",{staticClass:"line mint-indexsection-index"},[t._v("\n            热门银行\n          ")]),n("div",{staticClass:"hot_list"},t._l(t.bankHotListArr,function(e,a){return n("div",{key:a,staticClass:"box",attrs:{index:a}},[n("div",{staticClass:"search_item",on:{click:function(n){return t.clickCard(e)}}},[n("div",{staticClass:"text"},[t._v("\n                  "+t._s(e.name)+"\n                ")])])])}),0)])]),t._l(t.bankListArr,function(e,a){return n("mt-index-section",{key:a,attrs:{index:a}},t._l(e,function(e,a){return n("li",{key:a,staticClass:"search_item",on:{click:function(n){return t.clickCard(e)}}},[t._v("\n          "+t._s(e.name)+"\n        ")])}),0)})],2)],1)])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search_title"},[n("h5",{staticClass:"size36 color333"},[t._v("\n        选择银行\n      ")])])}],r=(n("456d"),n("55dd"),n("ac6a"),n("bd86")),c=(n("7f7f"),n("76a0")),o=(n("8635"),n("f1a6"),{name:"SelectCard",components:(a={},Object(r["a"])(a,c["IndexList"].name,c["IndexList"]),Object(r["a"])(a,c["IndexSection"].name,c["IndexSection"]),a),data:function(){return{bankListArr:{},bankHotListArr:{},searchValue:"",resultsList:""}},computed:{bankList:function(){return this.$store.state.bankList}},watch:{searchValue:function(t,e){var n=String(t).toUpperCase(),a=[];this.resultsList.forEach(function(t){-1===String(t.name).indexOf(n)&&-1===String(t.first_pinyin_letter).indexOf(n)||a.push(t)}),this.bankListArr=a.reduce(function(t,e){return t[e.first_pinyin_letter[0]]||(t[e.first_pinyin_letter[0]]=[]),t[e.first_pinyin_letter[0]].push(e),t},{}),this.bankListArr=this.objKeySort(this.bankListArr)}},created:function(){this.getBankListFun()},methods:{thisTitle:function(){document.title="选择银行卡"},getBankListFun:function(){var t=this;t.$api.card.getBankList().then(function(e){t.resultsList=e.data.data.bank_list,t.bankHotListArr=e.data.data.hot_bank_list,console.log(t.resultsList),t.bankListArr=t.resultsList.reduce(function(t,e){return console.log(t),console.log(e),t[e.first_pinyin_letter[0]]||(t[e.first_pinyin_letter[0]]=[]),t[e.first_pinyin_letter[0]].push(e),t},{}),t.bankListArr=t.objKeySort(t.bankListArr)})},objKeySort:function(t){console.log(t);var e=Object.keys(t).sort();console.log(e);for(var n={},a=0;a<e.length;a++)n[e[a]]=t[e[a]];return n},clickCard:function(t){this.$emit("selectCard",t)}}}),l=o,d=(n("9b87"),n("2877")),u=Object(d["a"])(l,s,i,!1,null,"2cfd1e14",null);e["a"]=u.exports},"826b":function(t,e,n){},"9b87":function(t,e,n){"use strict";var a=n("826b"),s=n.n(a);s.a},"9c90":function(t,e,n){},a86c:function(t,e,n){"use strict";n.r(e);var a,s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",["add"===t.status?n("top-msg",{attrs:{"header-name":"添加借记卡"}}):t._e(),"edit"===t.status?n("top-msg",{attrs:{"header-name":"编辑借记卡"}}):t._e(),n("div",{staticClass:"con_body"},[n("div",{staticClass:"form_cells form_cells_form bgfff"},[n("div",{staticClass:"form_cell"},[t._m(0),n("div",{staticClass:"form_cellBd"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.cardNo,expression:"cardNo"}],staticClass:"form_input",attrs:{type:"number",placeholder:"请输入您的借记卡号"},domProps:{value:t.cardNo},on:{input:function(e){e.target.composing||(t.cardNo=e.target.value)}}})])]),n("div",{staticClass:"form_cell"},[t._m(1),n("div",{staticClass:"form_cellBd",on:{click:function(e){t.bankPicker=!0}}},[t.bankSelect.name?n("span",{staticClass:"size30"},[t._v(t._s(t.bankSelect.name))]):n("span",{staticClass:"size30",staticStyle:{color:"#BEBEBE"}},[t._v("请选择所属银行")])])]),n("div",{staticClass:"form_cell"},[t._m(2),n("div",{staticClass:"form_cellBd"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.tel,expression:"tel"}],staticClass:"form_input",attrs:{type:"number",placeholder:"请输入预留手机号"},domProps:{value:t.tel},on:{input:function(e){e.target.composing||(t.tel=e.target.value)}}})])])]),"add"===t.status?n("div",{staticClass:"btn_warp"},[n("button",{staticClass:"btn btn_add",on:{click:t.addCardFun}},[t._v("\n        确认添加\n      ")])]):"edit"===t.status?n("div",{staticClass:"btn_warp"},[n("button",{staticClass:"btn btn_add",on:{click:t.editCardFUn}},[t._v("\n        保  存\n      ")])]):t._e()]),n("van-popup",{attrs:{position:"bottom"},model:{value:t.bankPicker,callback:function(e){t.bankPicker=e},expression:"bankPicker"}},[n("choose-card",{on:{selectCard:t.selectCard}})],1)],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form_cellHd"},[n("label",{staticClass:"form_label"},[t._v("借记卡号")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form_cellHd"},[n("label",{staticClass:"form_label"},[t._v("所属银行")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form_cellHd"},[n("label",{staticClass:"form_label"},[t._v("预留手机号")])])}],r=n("bd86"),c=(n("7f7f"),n("5f5f"),n("f253")),o=n("2c92"),l=(n("5b4d"),n("5515")),d={name:"AddCard",components:(a={topMsg:o["a"]},Object(r["a"])(a,c["a"].name,c["a"]),Object(r["a"])(a,"chooseCard",l["a"]),a),data:function(){return{status:this.$util.getQueryVariable("status"),cardUser:"",cardNo:"",tel:"",code:"",isGetCode:!1,num:60,timer:"",cardId:this.$util.getQueryVariable("cardId"),bankNo:"",bankSelect:{},bankPicker:!1,bankListArr:[]}},computed:{token:function(){return this.$store.state.token},bankList:function(){return this.$store.state.bankList}},created:function(){this.thisTitle(),this.getBankListFun(),"edit"===this.status&&this.getCardMsg()},methods:{thisTitle:function(){"add"===this.static?document.title="添加借记卡":document.title="编辑借记卡"},getCodeFun:function(){var t=this,e=function(e){return t.$dialog({title:e,showCancelButton:!1,confirmButtonText:"确定",cancelButtonText:"确定",className:"dialog",closeOnClickOverlay:!0})};t.tel?t.$util.isPhone(t.tel)?t.isGetCode||(t.isGetCode=!0,t.timer=setInterval(function(){0!==t.num?t.num--:(t.isGetCode=!1,t.num=60,clearInterval(t.timer))},1e3)):e("请输入正确的手机号码"):e("请输入您的手机号码")},addCardFun:function(){var t=this,e=function(e){return t.$dialog({title:e,showCancelButton:!1,confirmButtonText:"确定",className:"dialog",closeOnClickOverlay:!0})};if(t.cardNo)if(t.bankSelect)if(t.tel){var n={bank_no:t.bankSelect.bank_no,card_no:t.cardNo,card_phone_number:t.tel};t.$api.card.bindCard("DEBIT",n).then(function(n){console.log(n),e("添加借记卡成功").then(function(e){t.$router.go(-1)})}).catch(function(t){console.log(t)})}else e("请输入预留手机号码");else e("请输入所属银行");else e("请输入借记卡号")},getCardMsg:function(){var t=this;t.$api.card.getCard("DEBIT",this.cardId).then(function(e){e=e.data,t.cardNo=e.data.card_no,t.$set(t.bankSelect,"name",e.data.bank_info.name),t.$set(t.bankSelect,"bank_no",e.data.bank_info.bank_no),t.tel=e.data.card_phone_number})},editCardFUn:function(){var t=this,e=function(e){return t.$dialog({title:e,showCancelButton:!1,confirmButtonText:"确定",className:"dialog",closeOnClickOverlay:!0})};if(t.cardNo)if(t.bankSelect)if(t.tel){var n={bank_no:t.bankSelect.bank_no,card_no:t.cardNo,card_phone_number:t.tel};t.$api.card.editCard(t.cardId,"DEBIT",n).then(function(n){e("编辑借记卡成功").then(function(e){t.$router.go(-1)})})}else e("请输入预留手机号码");else e("请输入所属银行");else e("请输入借记卡号")},closeStatusPicker:function(t){console.log(t),this.bankSelect=t,this.bankPicker=!1},getBankListFun:function(){var t=this;t.$store.dispatch("GetBankList").then(function(){for(var e in t.bankList)t.bankListArr.push({bankNo:e,text:t.bankList[e]})})},selectCard:function(t){this.bankSelect=t,this.bankPicker=!1}}},u=d,f=(n("53aa"),n("2877")),_=Object(f["a"])(u,s,i,!1,null,"6f005392",null);e["default"]=_.exports}}]);