(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14f4be92"],{"06bf":function(t,e,a){"use strict";var n=a("3cd5"),i=a.n(n);i.a},"3cd5":function(t,e,a){},5515:function(t,e,a){"use strict";var n,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bgfff"},[a("div",[t._m(0),a("div",{staticClass:"search_warp"},[a("i",{staticClass:"icon_search"}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchValue,expression:"searchValue"}],staticClass:"search_input",attrs:{type:"text",placeholder:"请输入银行名称关键词"},domProps:{value:t.searchValue},on:{input:function(e){e.target.composing||(t.searchValue=e.target.value)}}})])]),a("div",{staticClass:"search_content"},[a("mt-index-list",{attrs:{height:312}},[t.searchValue?t._e():a("mt-index-section",{attrs:{index:""}},[a("li",[a("p",{staticClass:"line mint-indexsection-index"},[t._v("\n            热门银行\n          ")]),a("div",{staticClass:"hot_list"},t._l(t.bankHotListArr,function(e,n){return a("div",{key:n,staticClass:"box",attrs:{index:n}},[a("div",{staticClass:"search_item",on:{click:function(a){return t.clickCard(e)}}},[a("div",{staticClass:"text"},[t._v("\n                  "+t._s(e.name)+"\n                ")])])])}),0)])]),t._l(t.bankListArr,function(e,n){return a("mt-index-section",{key:n,attrs:{index:n}},t._l(e,function(e,n){return a("li",{key:n,staticClass:"search_item",on:{click:function(a){return t.clickCard(e)}}},[t._v("\n          "+t._s(e.name)+"\n        ")])}),0)})],2)],1)])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search_title"},[a("h5",{staticClass:"size36 color333"},[t._v("\n        选择银行\n      ")])])}],c=(a("456d"),a("55dd"),a("ac6a"),a("bd86")),r=(a("7f7f"),a("76a0")),o=(a("8635"),a("f1a6"),{name:"SelectCard",components:(n={},Object(c["a"])(n,r["IndexList"].name,r["IndexList"]),Object(c["a"])(n,r["IndexSection"].name,r["IndexSection"]),n),data:function(){return{bankListArr:{},bankHotListArr:{},searchValue:"",resultsList:""}},computed:{bankList:function(){return this.$store.state.bankList}},watch:{searchValue:function(t,e){var a=String(t).toUpperCase(),n=[];this.resultsList.forEach(function(t){-1===String(t.name).indexOf(a)&&-1===String(t.first_pinyin_letter).indexOf(a)||n.push(t)}),this.bankListArr=n.reduce(function(t,e){return t[e.first_pinyin_letter[0]]||(t[e.first_pinyin_letter[0]]=[]),t[e.first_pinyin_letter[0]].push(e),t},{}),this.bankListArr=this.objKeySort(this.bankListArr)}},created:function(){this.getBankListFun()},methods:{thisTitle:function(){document.title="选择银行卡"},getBankListFun:function(){var t=this;t.$api.card.getBankList().then(function(e){t.resultsList=e.data.data.bank_list,t.bankHotListArr=e.data.data.hot_bank_list,console.log(t.resultsList),t.bankListArr=t.resultsList.reduce(function(t,e){return console.log(t),console.log(e),t[e.first_pinyin_letter[0]]||(t[e.first_pinyin_letter[0]]=[]),t[e.first_pinyin_letter[0]].push(e),t},{}),t.bankListArr=t.objKeySort(t.bankListArr)})},objKeySort:function(t){console.log(t);var e=Object.keys(t).sort();console.log(e);for(var a={},n=0;n<e.length;n++)a[e[n]]=t[e[n]];return a},clickCard:function(t){this.$emit("selectCard",t)}}}),l=o,d=(a("9b87"),a("2877")),u=Object(d["a"])(l,i,s,!1,null,"2cfd1e14",null);e["a"]=u.exports},"826b":function(t,e,a){},"9b87":function(t,e,a){"use strict";var n=a("826b"),i=a.n(n);i.a},ad6c:function(t,e,a){"use strict";a.r(e);var n,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("top-msg",{attrs:{"header-name":"个人实名认证"}}),a("div",{staticClass:"con_body"},[a("div",{staticClass:"form_cells form_cells_form bgfff mgb20"},[a("div",{staticClass:"form_cell"},[t._m(0),a("div",{staticClass:"form_cellBd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form_input",attrs:{type:"text",placeholder:"请输入您的名字"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})])]),a("div",{staticClass:"form_cell"},[t._m(1),a("div",{staticClass:"form_cellBd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.identifyShow,expression:"identifyShow"}],ref:"idInput",staticClass:"form_input",attrs:{placeholder:"请输入您的身份证件号码"},domProps:{value:t.identifyShow},on:{keyup:t.showIdentify,blur:t.chargeIdentify,input:function(e){e.target.composing||(t.identifyShow=e.target.value)}}})])])]),a("div",{staticClass:"form_cells form_cells_form bgfff"},[a("div",{staticClass:"form_cell"},[t._m(2),a("div",{staticClass:"form_cellBd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.cardIdShow,expression:"cardIdShow"}],ref:"cardInput",staticClass:"form_input",attrs:{placeholder:"请输入您的借记卡号码"},domProps:{value:t.cardIdShow},on:{keyup:t.showNum,blur:t.chargeNum,input:function(e){e.target.composing||(t.cardIdShow=e.target.value)}}})])]),a("div",{staticClass:"form_cell"},[t._m(3),a("div",{staticClass:"form_cellBd",on:{click:function(e){t.bankPicker=!0}}},[t.bankSelect.name?a("span",{staticClass:"size30",staticStyle:{color:"#666666"}},[t._v(t._s(t.bankSelect.name))]):a("span",{staticClass:"size30",staticStyle:{color:"#BEBEBE"}},[t._v("请选择所属银行")])])]),a("div",{staticClass:"form_cell"},[t._m(4),a("div",{staticClass:"form_cellBd"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.cardTel,expression:"cardTel"}],staticClass:"form_input",attrs:{type:"number",placeholder:"请输入预留手机号"},domProps:{value:t.cardTel},on:{input:function(e){e.target.composing||(t.cardTel=e.target.value)}}})])])]),a("div",{staticClass:"btn_warp"},[a("button",{staticClass:"btn btn_submit",on:{click:t.confirmAuth}},[t._v("\n        确认提交\n      ")])])]),a("van-popup",{attrs:{position:"bottom"},model:{value:t.bankPicker,callback:function(e){t.bankPicker=e},expression:"bankPicker"}},[a("choose-card",{on:{selectCard:t.selectCard}})],1)],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form_cellHd"},[a("label",{staticClass:"form_label"},[t._v("姓名")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form_cellHd"},[a("label",{staticClass:"form_label"},[t._v("身份证")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form_cellHd"},[a("label",{staticClass:"form_label"},[t._v("借记卡号")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form_cellHd"},[a("label",{staticClass:"form_label"},[t._v("所属银行")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"form_cellHd"},[a("label",{staticClass:"form_label"},[t._v("预留手机号")])])}],c=(a("a481"),a("bd86")),r=(a("7f7f"),a("5f5f"),a("f253")),o=a("2c92"),l=a("5515"),d=(a("5b4d"),{name:"Authentication",components:(n={topMsg:o["a"]},Object(c["a"])(n,r["a"].name,r["a"]),Object(c["a"])(n,"chooseCard",l["a"]),n),data:function(){return{tel:"",code:"",isGetCode:!1,num:60,timer:"",name:"",identify:"",identifyShow:"",isAutoUpload:"",cardId:"",cardIdShow:"",cardTel:"",bankSelect:{},bankPicker:!1,bankListArr:[],items:{}}},computed:{token:function(){return this.$store.state.token},userInfo:function(){return this.$store.state.userInfo},bankList:function(){return this.$store.state.bankList}},watch:{},created:function(){var t=this;this.thisTitle(),this.getBankListFun(),this.$store.dispatch("GetBankList").then(function(){t.judgeUserAuth()}),this.$store.dispatch("GetUserInfo").then(function(){})},methods:{thisTitle:function(){document.title="个人实名认证"},getCodeFun:function(){var t=this,e=function(e){return t.$dialog({title:e,showCancelButton:!1,confirmButtonText:"确定",cancelButtonText:"确定",className:"dialog",closeOnClickOverlay:!0})};t.tel?t.$util.isPhone(t.tel)?t.isGetCode||(t.isGetCode=!0,t.timer=setInterval(function(){0!==t.num?t.num--:(t.isGetCode=!1,t.num=60,clearInterval(t.timer))},1e3)):e("请输入正确的手机号码"):e("请输入您的手机号码")},confirmAuth:function(){var t=this,e=function(e){return t.$dialog({title:e,showCancelButton:!1,confirmButtonText:"确定",className:"dialog",closeOnClickOverlay:!0})};t.name?t.identify?t.cardId?t.bankSelect?t.cardTel?t.submitAuthentication():e("请输入您的预留手机号码"):e("请选择借记卡所属银行"):e("请输入您的借记卡号"):e("请输入您的身份证"):e("请输入您的姓名")},submitAuthentication:function(){var t=this,e=this.$toast.loading({duration:0,forbidClick:!0,loadingType:"spinner",message:"请稍候..."}),a={id_card_name:t.name,id_card_no:t.identify,bank_card_no:t.cardId,bank_code:t.bankSelect.bank_no,bank_name:t.bankSelect.name,bank_card_phone_num:t.cardTel};t.$api.center.authentication(a).then(function(a){e.clear(),t.$dialog({title:"认证资料已提交，请等待审核",showCancelButton:!1,confirmButtonText:"确定",className:"dialog",closeOnClickOverlay:!1}).then(function(){t.$router.replace("/center")})})},judgeUserAuth:function(){var t=this;t.getAuthenticationFun()},getAuthenticationFun:function(){var t=this;t.$api.center.getAuthentication().then(function(e){t.name=e.data.data.id_card_name,t.identify=e.data.data.id_card_no,t.identifyShow=t.identify.replace(/(\d{6})(?=\d)/,"$1 ").replace(/(\d{8})(?=\d)/,"$1 "),t.cardId=e.data.data.bank_card_no,t.cardIdShow=t.cardId.replace(/\s/g,"").replace(/(\d{4})(?=\d)/g,"$1 "),t.cardTel=e.data.data.bank_card_phone_num,t.$set(t.bankSelect,"bank_no",e.data.data.bank_code),t.$set(t.bankSelect,"name",t.bankList[t.bankSelect.bank_no])})},closeStatusPicker:function(t){console.log(t),this.bankSelect=t,this.bankPicker=!1},getBankListFun:function(){var t=this;t.$store.dispatch("GetBankList").then(function(){for(var e in t.bankList)t.bankListArr.push({bankNo:e,text:t.bankList[e]})})},selectCard:function(t){console.log(t),this.bankSelect=t,this.bankPicker=!1},showNum:function(){var t=this.$refs.cardInput;t.selectionStart<this.cardIdShow.length||(this.cardIdShow=this.cardIdShow.replace(/\s/g,"").replace(/(\d{4})(?=\d)/g,"$1 "),this.cardId=this.cardIdShow.replace(/\s/g,""))},chargeNum:function(){this.cardIdShow=this.cardIdShow.replace(/\s/g,"").replace(/(\d{4})(?=\d)/g,"$1 "),this.cardId=this.cardIdShow.replace(/\s/g,"")},showIdentify:function(){var t=this.$refs.idInput;t.selectionStart<this.identifyShow.length||(this.identifyShow=this.identifyShow.replace(/\s/g,"").replace(/(\d{6})(?=\d)/,"$1 ").replace(/(\d{8})(?=\d)/,"$1 "),this.identify=this.identifyShow.replace(/\s/g,""))},chargeIdentify:function(){this.identifyShow=this.identifyShow.replace(/\s/g,"").replace(/(\d{4})(?=\d)/g,"$1 ").replace(/(\d{8})(?=\d)/,"$1 "),this.identify=this.identifyShow.replace(/\s/g,"")}}}),u=d,f=(a("06bf"),a("2877")),h=Object(f["a"])(u,i,s,!1,null,"0e766b38",null);e["default"]=h.exports}}]);