(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a4517a16"],{"1c8c":function(t,s,a){},"2c92":function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return t.isWechat?t._e():a("div",{staticClass:"header"},[a("div",{staticClass:"header_body"},[a("span",{staticClass:"goBack",on:{click:t.goBack}},[a("van-icon",{attrs:{name:"arrow-left"}})],1),a("p",[t._v(t._s(t.headerName))]),t.shareShow?a("span",{staticClass:"shareSheet",on:{click:t.shareSheet}},[t._v("分享")]):t._e()])])},n=[],i={name:"TopMsg",props:{headerName:{type:String,default:""},required:{type:Boolean,default:!0},shareShow:{type:Boolean,default:!1}},data:function(){return{}},computed:{isWechat:function(){return this.$store.state.isWechat}},created:function(){},methods:{goBack:function(){api.historyBack({frameName:""},function(t,s){t.status||this.$router.go(-1)})},shareSheet:function(){this.$emit("shareSheet")}}},o=i,r=(a("4373"),a("2877")),c=Object(r["a"])(o,e,n,!1,null,"208c730d",null);s["a"]=c.exports},4373:function(t,s,a){"use strict";var e=a("e4d1"),n=a.n(e);n.a},7930:function(t,s,a){"use strict";var e=a("1c8c"),n=a.n(e);n.a},dd0a:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"direct-team-page"},[a("top-msg",{attrs:{"header-name":t.isAllDirect?"一级用户":t.typeName+t.title}}),t.isAllDirect?t._e():a("div",{staticClass:"clear sub-title"},[a("span",{staticClass:"lt text"},[t._v("我的直推用户")]),a("span",{staticClass:"rt text"},[t._v("共"+t._s(t.teamCount)+"人")])]),a("ul",{staticClass:"list"},t._l(t.list,function(s,e){return a("li",{key:e,staticClass:"item",on:{click:function(a){return a.stopPropagation(),t.toNext(s)}}},[a("div",{class:["top","clear",t.isAllDirect?"border":""]},[a("span",{staticClass:"img-box lt"},[a("img",{attrs:{src:s.rank_logo?s.rank_logo.url:""}})]),a("span",{staticClass:"user lt"},[a("p",{staticClass:"name"},[t._v("\n            "+t._s(s.user_id_card_name)+"\n            "),a("span",{on:{click:function(a){return t.toCall(s.user_phone_num)}}},[t._v(t._s(s.user_phone_num))])]),a("p",{staticClass:"type flex-row-center"},[a("span",[t._v(t._s(s.rank_name)+"会员")]),s.enable_points_upgrade?a("span",{staticClass:"upgrade",on:{click:function(a){return a.stopPropagation(),t.upgradeFun(s)}}},[t._v("积分升级")]):t._e()])]),a("span",{class:["rt","num",t.isAllDirect?"no-margin":""]},[t.isAllDirect?a("span",{staticClass:"icon-box"},[t._v("\n            详情\n            "),a("i",{staticClass:"iconfont icon-gengduo"})]):t._e(),s.user_id_card_name?a("p",{staticClass:"text"},[t._v("直推"+t._s(s.first_level_count)+"人 间推"+t._s(s.other_level_count)+"人")]):t._e(),s.user_id_card_name?t._e():a("p",{staticClass:"text no-data"},[t._v("资料未完善")])])]),a("div",{class:["bottom","clear",t.isAllDirect?"border":""]},[a("span",{staticClass:"text lt"},[t._v("注册时间："+t._s(s.gmt_create))]),s.user_id_card_name?a("span",{staticClass:"text gold rt"},[t._v("\n          累计消费金额：\n          "),a("span",{staticClass:"price"},[t._v(t._s((s.trade_amount_sum/100).toFixed(2))+"元")])]):t._e()])])}),0),a("van-dialog",{attrs:{"show-confirm-button":!1,"before-close":t.beforeUpgradeDialog,"close-on-click-overlay":""},model:{value:t.upgradeDialog,callback:function(s){t.upgradeDialog=s},expression:"upgradeDialog"}},[a("div",{staticClass:"upgrade flex-column-center"},[a("span",{staticClass:"title"},[t._v("确认支付升级？")]),a("div",{staticClass:"content"},[t._v("\n        支付"),a("span",{staticClass:"integral"},[t._v(t._s(t.upgradeMsg.upgrade_points)+"积分")]),t._v("为以下用户升级为"+t._s(t.upgradeMsg.next_rank_name)+"会员\n      ")]),a("span",{staticClass:"msg"},[t._v(t._s(t.upgradeMsg.user_id_card_name)+" "+t._s(t.upgradeMsg.user_phone_num))]),a("div",{staticClass:"upgradeBtn flex-row-between"},[a("div",{staticClass:"return",on:{click:t.closeUpgradeDialog}},[t._v("\n          返回\n        ")]),a("div",{staticClass:"pay",on:{click:function(s){return t.upgradeUser(t.upgradeMsg.user_id)}}},[t._v("\n          支付\n        ")])])])]),a("van-dialog",{attrs:{"show-confirm-button":!1,"before-close":t.beforeSuccessDialog,"close-on-click-overlay":""},model:{value:t.successDialog,callback:function(s){t.successDialog=s},expression:"successDialog"}},[a("div",{staticClass:"successDialog flex-column-center"},[a("i",{staticClass:"iconfont icon-gou"}),a("span",{staticClass:"title"},[t._v("支付成功")]),a("span",{staticClass:"integral"},[t._v(t._s(t.upgradeMsg.upgrade_points)+"积分")]),a("span",{staticClass:"userMsg"},[t._v(t._s(t.upgradeMsg.user_id_card_name)+" "+t._s(t.upgradeMsg.user_phone_num))]),a("span",{staticClass:"tip"},[t._v("升级为"+t._s(t.upgradeMsg.next_rank_name)+"会员")]),a("div",{staticClass:"successBtn",on:{click:t.successBtnFun}},[t._v("\n        确定\n      ")])])]),a("van-dialog",{attrs:{"show-confirm-button":!1,"before-close":t.beforeFailDialog,"close-on-click-overlay":""},model:{value:t.failDialog,callback:function(s){t.failDialog=s},expression:"failDialog"}},[a("div",{staticClass:"failDialog flex-column-center"},[a("i",{staticClass:"iconfont icon-x"}),a("span",{staticClass:"title"},[t._v("支付失败")]),a("span",{staticClass:"tip"},[t._v("积分余额不足")]),a("div",{staticClass:"failBtn",on:{click:t.failBtnFun}},[t._v("\n        确定\n      ")])])])],1)},n=[],i=(a("ac6a"),a("2c92")),o={name:"DirectTeam",components:{topMsg:i["a"]},data:function(){return{teamCount:0,typeName:"钻石",list:[],isAllDirect:!1,userName:"",userRank:"",userTotal:"",upgradeDialog:!1,upgradeMsg:"",successDialog:!1,failDialog:!1}},computed:{title:function(){return this.$route.meta.title}},created:function(){this.fetchData()},beforeDestroy:function(){this.sendMsg()},methods:{toCall:function(t){event.preventDefault()||event.stopPropagation(),window.location.href="tel://"+t},upgradeUser:function(t){var s=this;this.$api.member.upgradeUser({target_user_id:t}).then(function(t){console.log(t),s.successDialog=!0}).catch(function(t){console.log(t),s.failDialog=!0})},upgradeFun:function(t){this.upgradeMsg=t,this.upgradeDialog=!0,console.log(this.upgradeMsg)},beforeUpgradeDialog:function(t,s){s()},beforeSuccessDialog:function(t,s){s()},beforeFailDialog:function(t,s){s()},closeUpgradeDialog:function(){this.upgradeDialog=!1},successBtnFun:function(){this.successDialog=!1,this.$router.push({path:"/bill",query:{current:"4"}})},failBtnFun:function(){this.failDialog=!1},sendMsg:function(){this.bus.$emit("userMsg",{userName:this.userName,userRank:this.userRank,userTotal:this.userTotal})},toNext:function(t){this.userName=t.user_id_card_name,this.userRank=t.rank_order,this.userTotal=t.trade_amount_sum,this.$router.push("/secondTeam?userId="+t.user_id)},fetchData:function(){var t=this,s=parseInt(this.$route.query.rankOrder),a="";this.isAllDirect=!0,isNaN(s)||(a={rankOrder:s},this.isAllDirect=!1),this.$api.member.getRankListMsg().then(function(s){var e=s.data.data;console.log(e),t.$api.member.listMyDirectTeam(a).then(function(s){s.data.data.forEach(function(t){e.forEach(function(s,a,e){t.rank_order===s.rank_order&&(t.enable_points_upgrade=e[a+1].enable_points_upgrade,t.upgrade_points=e[a+1].upgrade_points,t.next_rank_name=e[a+1].rank_name)})}),t.list=s.data.data,t.teamCount=t.list.length,t.list.length>0&&(t.typeName=t.list[0].rank_name),console.log(t.list)})})}}},r=o,c=(a("7930"),a("2877")),l=Object(c["a"])(r,e,n,!1,null,"45928736",null);s["default"]=l.exports},e4d1:function(t,s,a){}}]);